---
- hosts: test-host
  become: yes
  roles:
    - wietmann.shadowsocks_rust
    - githubixx.ansible_role_wireguard
    - dante

  tasks:
    - name: Install a list of packages
      ansible.builtin.apt:
        pkg:
        - sudo
        - htop
        - vim

    - name: Add roma
      ansible.builtin.user:
        name: roma
        groups: sudo
        append: yes
        shell: /bin/bash
        generate_ssh_key: yes
        ssh_key_bits: 2048
        ssh_key_file: .ssh/id_rsa
        password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63333438343134613135643634653963363033353635353466656137373235626164636262646461
          6135366636313136313162393139363130343830356163370a393230373461663131396461333733
          33623064343638623163616633643132393363373663663164623239316466373134626532313762
          3432343732663635380a306631343435326164626331366362393763313332383636333335316666
          63666334653537356566663232303338333435613539303631616335393338326435343266656636
          34323530356135306235636261303363323535363765633735323762326364323931626265343832
          35326232663937323065383937306330316330353933333363383230653232323237323734316635
          66313832653031613039653066653765333963623065613065323961353861383838646465313962
          64623631656233363937303633663834336137646663306238383238383337373033
    - name: Set authorized key
      ansible.posix.authorized_key:
        user: roma
        state: present
        key: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQD3/Ea2NgCkivyx1LRLnua7ZbBVRvniyYLFdzMjqRd8UsPfnZHfFn82CnszPE2yBuKZ3cx3fuK55rl0Uf2HxfpS0ywbQ8jJ9idkqHi+yY6M+QwZlfuWvEKEWs9kPpqg63TXEiFRM9jjusMceSBesFIDWbuGJ4rEqIgc+G7S6GK56V760HnmvudtyCfmQ2YPEYcYjAOakAth69KY5wDPFiZTZE4YIEVuaHduoaZV8yCwznIgK1xZqf9mtbXPvZEDpt5XYSeTUI9TybM5OiYkbS/SB18l0fJUhCsRAeBOabooTJaGMyGRo52J4vu21vdzrPkuO+yCB71HnWfTZKZPq9Rwo8TiEzVk971tf6TrGqvZ96nZjohqFIGpY7eYUow4wRwURSO61TGNmUGsFYOKcI9MVhJHv7t8SEUsKWSVbiM5lJTRkV2Q5H+3mMvI+xlTEZ9zStOryEddA+ND8gGQxnPNU0Hk0xRrFfiqszRGg36CogsGft2QvoSJhczouq8gMvc=
