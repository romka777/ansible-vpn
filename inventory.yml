vpn:
  hosts:
    v.sadam.ru:
      ansible_host: v.sadam.ru
      wireguard_addresses:
        - "192.168.20.6/24"
      wireguard_private_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          65336266616565633138316432626533343463393134626133353532393637613563323930646266
          6464613936663035393937633666643666316430393561610a333931353334383038356661326237
          31366436313363633239663236376166316563663336326435383038373464323835303862616236
          6237623536653336650a623865383132306663613730376565653065376631383233363464656264
          31313962633330643965643838346137656530326265616233343865386366353835326466373838
          6639303830613237383962303164323863313062383763616539


    test-host:
      ansible_host: 192.168.88.145
      wireguard_addresses:
        - "192.168.20.10/24"
      wireguard_private_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32373964623265636630643566653734633232326335623737376662316365623866373231646135
          6633646262383330616538623163626332313032393165610a313136333866663062623962316435
          34303563316530306566303661666534336333623036663361366234366535636331613561386533
          3538633839376539310a333033653139396431396461313861323333346136643462396361396363
          38316238383362306631626234346434393333386263666362383432316433326630313466356266
          3763303466636437306234613762396231353261613266396264

  vars:
    ansible_ssh_common_args: '-o StrictHostKeyChecking=no'
    wireguard_unmanaged_peers:
      mikrotik:
        public_key: "UxN1MRi3IR5Kjpt2SLo4ysaM2tbHItKxGTm/BPI+DGQ="
        allowed_ips: "192.168.20.0/24"
        endpoint: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          65366133353432326463616331376264343035663362636361316330313937363934346633306432
          6332656131306163316261613364646130376562383031370a323436303362656635333162646165
          36363664633566333838376135333630363035656162663230363037393738353838356566363164
          3039623861333632380a626165396330316338306639663036666664316234653066303032343430
          36613564303665336436366436323465333166656432663965613763396662393631
        persistent_keepalive: 30

    shadowsocks_rust_config:
      - name: server
        state: present
        type: server
        config:
          server: "0.0.0.0"
          server_port: 8388
          password: !vault |
            $ANSIBLE_VAULT;1.1;AES256
            36353565643033316232353535633165663933363539373332346235666137313234373231376339
            6336373837643634383033623733656236303962616239300a656237363336353465366562623530
            32663364346461396630373137313265646461396431383264613964666264343534343632353537
            6662623133333633620a626437373361626135376630633434323862326530643635663935393630
            39653039326132666338356563636231623864393465373231613933353062643832
          timeout: 60
          method: "aes-256-gcm"
          fast_open: true
          mode: "tcp_and_udp"
    _packages:
      "Debian":
        - xz-utils
        - zip
        - tar
      "RedHat":
        - xz
        - zip
        - tar
    danted:
      logoutput: /var/log/danted.log
      internal_name: "wg0"
      internal_port: 21090
      external: "{{ ansible_default_ipv4.interface }}"
      clientmethod: none
      method: none
      user:
        privileged: root
        notprivileged: nobody
        libwrap: nobody
      client:
        pass:
          first_client_pass:
          - "from: 192.168.20.0/24 to: 0.0.0.0/0"
      pass:
        first_pass:
          - "from: 0.0.0.0/0 to: 0.0.0.0/0"
